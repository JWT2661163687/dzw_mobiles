<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<div id="mechanicstarapp" style="background-color: white;color:#F56C6C">
			<el-row :gutter="20">
				<el-col :span="16">
					<div>
						<h1>技工星级</h1></div>
				</el-col>
				<el-col :span="8">
					<div>
						<el-button size="mini" style="float: right;font-size: 15px;background-color: white;color:#F56C6C">关闭</el-button>
					</div>
				</el-col>
			</el-row>
			<br />
			<div>
				<el-row :span="10">
					<el-col :md="1" :push="18">
						<el-button style="background-color: white;color:#F56C6C" @click="updateMechanicstar">保存</el-button>
					</el-col>
					<el-col :md="1" :push="18" style="margin-left: 20px;">
						<el-button style="background-color: white;color:#F56C6C" @click="deleteMechanicstar(addmechanicstar.meid)">删除</el-button>
					</el-col>
					<el-col :md="1" :push="18" style="margin-left: 20px;">
						<el-button style="background-color: white;color:#F56C6C" @click="insertmechanicstar">新增</el-button>
					</el-col>
				</el-row>
			</div>
			<div style="background-color: white;color:#F56C6C">
				等级编码：
				<el-input v-model="addmechanicstar.meid" size="small" placeholder="请输入内容" style="width: 100px;">
				</el-input>

				星级：
				<el-input v-model="addmechanicstar.starrating" size="small" placeholder="请输入内容" style="width: 100px;">
				</el-input>

				等级：
				<el-input v-model="addmechanicstar.grade" size="small" placeholder="请输入内容" style="width: 100px;">
				</el-input>

				提成权重：
				<el-input v-model="addmechanicstar.weight" size="small" placeholder="请输入内容" style="width: 100px;">
				</el-input>

			</div>
			<el-table style="background-color: white;color:#F56C6C" ref="singleTable" @current-change="fuzhi" :data="mechanicstar" highlight-current-row>
				<el-table-column prop="meid" label="编码">
				</el-table-column>
				<el-table-column prop="starrating" label="星级">
				</el-table-column>
				<el-table-column prop="grade" label="等级">
				</el-table-column>
				<el-table-column prop="weight" label="提成权重">
				</el-table-column>
			</el-table>
		</div>
	</body>
	<script type="text/javascript" src="../../js/dialog.js" ></script>
	<script>
		var mechanicstarapp = new Vue({
			el: "#mechanicstarapp",
			data: {
				mechanicstar: [],
				addmechanicstar:{
					meid:'',
					starrating:'',
					grade:'',
					weight:''
				}
			},
			mounted() {
				this.goToPage();
			},
			methods: {
				goToPage() {
					let _this = this;
					axios.get(`http://127.0.0.1:8080/dzw_moblie/api/mech/lzjquery`).then(function(resp) {
						_this.mechanicstar = resp.data;
					}).catch(function(e) {
						console.info(e);
					});
				},
				fuzhi(currentRow,oldCurrenRow){
					mechanicstarapp.addmechanicstar.meid=currentRow.meid;
					mechanicstarapp.addmechanicstar.starrating=currentRow.starrating;
					mechanicstarapp.addmechanicstar.grade=currentRow.grade;
					mechanicstarapp.addmechanicstar.weight=currentRow.weight;
				},
				insertmechanicstar() {
					axios.post("http://127.0.0.1:8080/dzw_moblie/api/mech/insert", this.addmechanicstar).then(function(resp) {
						if(resp.data.code == "200") {
							alert('新增成功');
							mechanicstarapp.goToPage();
						}
					}).catch(function(e) {});
				},
				updateMechanicstar() {
					//let id = sessionStorage.getItem("id");
					//this.person.id=id;
					axios.put("http://127.0.0.1:8080/dzw_moblie/api/mech/update", this.addmechanicstar).then(function(resp) {
						if(resp.data.code == "200") {
							alert('更新成功');
							mechanicstarapp.goToPage();
						}
					}).catch(function(e) {});
				},
				deleteMechanicstar(meid) {
					let _this = this;
					if(window.confirm('是否移除？')) {
						axios.delete(`http://127.0.0.1:8080/dzw_moblie/api/mech/mechs/${meid}`).then(function(resp) {
							if(resp.data.code == "200") {
								showAlertDialog('移除成功');
								mechanicstarapp.goToPage();
							}
						}).catch(function(e) {});
					}
				}
			}
		});
	</script>

</html>